<!doctype html>
<!-- Buttons  http://www.sureshsharma.info/2015/03/blog-post.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 
    <title>Presure sensor</title>
    <style>body {
        padding: 0;
        margin: 0;
        background: #fff
    }
    .btn-large{
      padding:9px 30px;
      font-size:17px;
    }

    .btn-circled{
      border-radius:20px
    }

    a{
      font-family:arial;
      text-decoration:none;
      font-weight:normal;
      outline:none;
      text-transform:uppercase;
      margin:2px 4px;
    }

    /*define basic button*/

    .btn{
      border:1px solid #0099CC;
      color:#0099CC;
      box-shadow: 1px 1px 5px #888888;
    }

    .btn-blue{
      background-color:#00A9E7;
      color:#FFF
    }

    .btn-red{
      background-color:#E70909;
      color:#FFF
    }

    .btn:hover{
      border:1px solid #056495;
      color:#056495
    }

    .btn:active{
      background-color:#056495;
      color:#FFF
    }
    </style>
</head>
<hr>

<body>

<h1>Presure Sensing</h1>


<a class="btn btn-circled btn-large btn-blue" id="record" onclick="tootgleRecordBtn()">
  Start Record
</a>
<br>
<br>
<br>
<a class="btn btn-circled btn-large btn-blue" href="adcGauge.html">
  Gauge
</a>
<br>
<br>
<br>
<a class="btn btn-circled btn-large btn-blue" href="line.html">
  Line Chart
</a>

<br>
<br>
<br>
<a class="btn btn-circled btn-large btn-blue" href="/show-recoredsessions">
   Recorded Data
</a>


</body>
</html>


 <script language="javascript">
var _bRecord=false;

    function tootgleRecordBtn()
    {
        _bRecord=!_bRecord; // Toogle btn
        updateRecordBtn(_bRecord);
    }

    function updateRecordBtn(bRecordingState)
    {
        _bRecord=bRecordingState; // Update global record state
        var btnRecord = document.getElementById("record");
        if(bRecordingState)
        {
            btnRecord.className ="btn btn-circled btn-large btn-red";
            btnRecord.text ="Stop Record";
        }
        else
        {
            btnRecord.className ="btn btn-circled btn-large btn-blue";
            btnRecord.text ="Start Record";
        }
    }



        function initWebSocketConnection()
        {
            var scheme
            if (window.location.protocol == 'https:')
                scheme = 'wss:';
            else
                scheme = 'ws:';
            var wsUri = scheme + '//' + window.location.hostname;            
            websocket           = new WebSocket(wsUri);
            websocket.onopen    = function(evt) { onOpen    (evt) };
            websocket.onclose   = function(evt) { onClose   (evt) };
            websocket.onmessage = function(evt) { onMessage (evt) };
            websocket.onerror   = function(evt) { onError   (evt) };
        }

        function onOpen(evt)
        {
            console.log('WebSocket connection opened');
            SendMsg('{"Get" : "isLogging"}');

        }

        function onClose(evt)
        {
            console.log('WebSocket connection opened');
        }

        function onMessage(evt)
        {
            
            const obj = JSON.parse(evt.data);
            if (obj.isLogging)  
            {

                console.log('obj.isLogging :' + obj.isLogging);

            }
            else
                console.log('Unknown WebSocket msg from server:' + evt.data );

        }

        function onError(evt)
        {
            console.log('ERROR WebSocket msg from server:' + evt.data );
        }

        function SendMsg(msg)
        {            
            websocket.send(msg);
        }

    function init()
    {    
        initWebSocketConnection();
        
    }

    window.addEventListener("load", init, false);

</script>
    